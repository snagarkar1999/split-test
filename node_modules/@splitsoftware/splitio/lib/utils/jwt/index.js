"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");

var _Object$defineProperty = require("@babel/runtime-corejs3/core-js-stable/object/define-property");

require("core-js/modules/es.array.join");

require("core-js/modules/es.object.to-string");

require("core-js/modules/es.regexp.exec");

require("core-js/modules/es.regexp.to-string");

require("core-js/modules/es.string.replace");

require("core-js/modules/es.string.split");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.decodeJWTtoken = decodeJWTtoken;

var _slice = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/slice"));

var _map = _interopRequireDefault(require("@babel/runtime-corejs3/core-js-stable/instance/map"));

var _base = require("../base64");

/**
 * Decode a JWT token
 */
function decodeJWTtoken(token) {
  var _context;

  var base64Url = token.split('.')[1];
  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/'); // no need to check availability of `encodeURIComponent`, since it is a function highly supported in browsers, node and other platforms.

  var jsonPayload = decodeURIComponent((0, _map.default)(_context = (0, _base.decodeFromBase64)(base64).split('')).call(_context, function (c) {
    var _context2;

    return '%' + (0, _slice.default)(_context2 = '00' + c.charCodeAt(0).toString(16)).call(_context2, -2);
  }).join(''));
  return JSON.parse(jsonPayload);
}